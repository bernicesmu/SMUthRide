<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
        <link
            href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/css/bootstrap.min.css"
            rel="stylesheet"
            integrity="sha384-Zenh87qX5JnK2Jl0vWa8Ck2rdkQ2Bzep5IDxbcnCeuOxjzrPF/et3URy9Bv1WTRi"
            crossorigin="anonymous"
        />
        <link rel="stylesheet" href="../../navbar/nav_styles.css" />
        <link rel="stylesheet" href="../../main.css" />
        <link rel="stylesheet" href="../rides/rides_list/toggle_button.css" />
        <link rel="stylesheet" href="../rides/rides_list/offers.css" />
        <link rel="stylesheet" href="../rides/rides_list/card.css" />
        <style>
        tbody > tr:hover{
            background-color: #0a3069;
        }
        </style>
        <title>Offers</title>
    </head>
    <body>
        <div id="navbarVue">
            <div
                v-html="navbar_html"
                @scroll="nav_animation"
                data-page="offers"
            ></div>
        </div>
        <div id="populate_listings">

                        <h1 class="text-center">Offers</h1>

            <div id="driver" v-if="driver_listings.length>0">
                <h2>Driver</h2> <br>
                <h4>My Scheduled Drives</h4>
                <table class="table text-center mx-3" style="">
                <thead>
                    <tr>
                        <th scope="col">Date</th>
                        <th scope="col">Time</th>
                        <th scope="col">From</th>
                        <th scope="col">To</th>
                        <th scope="col">Seats</th>
                        <th scope="col">Price</th>
                    </tr>
                </thead>
                    <tbody>
                    <tr v-for="listing in driver_listings" v-on:click="redirect(listing.ride_id)">
                        <td>{{format_date(listing.date)[1]}}</td>
                        <td>{{formatAMPM(listing.time)}}</td>
                        <td class="">{{listing.smu_to_from =="From"? listing.smu_location: listing.user_address}}</td>
                        <td>{{listing.smu_to_from =="To"? listing.smu_location: listing.user_address}}</td>
                        <td>{{listing.users_offered==undefined? `0`:listing.users_offered.length}} / {{listing.max_capacity}}</td>
                        <td>${{listing.cost}}</td>
                    </tr>
                    </tbody>
                </table>

            </div>
            <div id="rider" v-if="rider_listings.length>0">
                <div class="d-flex justify-content-evenly">
                <div>
                    <h2>Rider</h2> <br>
                    <h4>My Scheduled Rides</h4>
                </div>

                <div>
                    <label class="switch">
                        <input type="checkbox" id="togBtn" v-on:change="change_direction()">
                        <div class="slider round">
                            <!--ADDED HTML -->
                            <span class="on" style=" position:absolute; right:17px; top:15px"> To</span>
                            <span class="on" style=" position:absolute; right:1px; top: 31px"> SMU</span>
                            <span class="off" style=" position:absolute; right:17px; top:15px"> From</span>
                            <span class="off" style=" position:absolute; right:20px; top: 31px"> SMU</span>
                            <!--END-->
                        </div>
                    </label>
                </div>
                </div>
                <div class="card col-xl-2 col-lg-6 col-md-3 " v-for="listing in rider_listings">
                    <div class="card-body col py-0">

                        <a class="stretched-link" v-bind:href="'./../ride_details/rides_indiv_rider.html?rideid=' + listing.ride_id"></a>
                        <span class="badge rounded-pill px-1" v-if="listing.frequency === 'recurring'" hidden>
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-arrow-repeat" viewBox="0 0 16 16">
                                <path d="M11.534 7h3.932a.25.25 0 0 1 .192.41l-1.966 2.36a.25.25 0 0 1-.384 0l-1.966-2.36a.25.25 0 0 1 .192-.41zm-11 2h3.932a.25.25 0 0 0 .192-.41L2.692 6.23a.25.25 0 0 0-.384 0L.342 8.59A.25.25 0 0 0 .534 9z"/>
                                <path fill-rule="evenodd" d="M8 3c-1.552 0-2.94.707-3.857 1.818a.5.5 0 1 1-.771-.636A6.002 6.002 0 0 1 13.917 7H12.9A5.002 5.002 0 0 0 8 3zM3.1 9a5.002 5.002 0 0 0 8.757 2.182.5.5 0 1 1 .771.636A6.002 6.002 0 0 1 2.083 9H3.1z"/>
                            </svg>
                        </span>

                        <div class="d-flex mt-4">

                            <div class="bd-highlight col-4 my-auto">

                                <div class="d-flex justify-content-center">
                                    <!-- this one to update -->
                                    <!-- <img src="https://mdbcdn.b-cdn.net/img/Photos/new-templates/bootstrap-profiles/avatar-2.webp"
                                         alt="Generic placeholder image" class="img-fluid rounded-circle border"
                                    > -->
                                    <img :src="get_url(listing['driver_username'])" class="profile-pic img-fluid rounded-circle rounded-circle-dp"
                                style="object-fit: contain; height: 60px; width: 60px; object-position: 50% 50%;border:black solid 1px" >
                                </div>

                            </div>
                            <div class="col-8">

                                <div class="text-center overflow-visible ">

                                    <h5 class="mb-0 py-2 ">{{get_user_name(listing.driver_username)}}</h5>
                                    <h5 class="my-0 fw-bold">{{format_date(listing.date)[1]}}</h5>
                                    <h5 class="my-0 fw-bold">{{format_date(listing.date)[0]}} {{formatAMPM(listing.time)}}</h5>

                                </div>

                            </div>
                        </div>
                        <hr class="mb-1 mt-2" />
                        <div>

                            <h2 class="card-title fw-bold text-center mb-3">

                                <i class="bi bi-geo-alt-fill"></i>{{listing.area}}

                            </h2>
                            <div class="d-flex my-2">

                                <h1 class="me-auto">${{listing.cost}}</h1>

                                <h1>{{listing.users_offered.length}}<i class="bi bi-person-fill"></i></h1>

                            </div>

                        </div>

                    </div>

                </div>
            </div>
        </div>
   

    </body>
    <script>
        const user_name = "BobTan123";
        localStorage.user = user_name;
    </script>

<!-- <script>
    const user_name = "BobTan123"
    localStorage.user= user_name
</script> -->
<script src="offers.js" type="module"></script>
<script src="../../navbar/navbar.js" type="module"></script>
</html>
