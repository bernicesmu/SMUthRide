<!DOCTYPE html>

<!-- note to self to get some changes in the rides indiv driver
        1. SMU where? scis? soe? sol?
        2. Interactive? or make it next page?
        3. Maybe put in where the default locations are actually at
        4. this html is from the driver's perspective
    -->

<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link
        href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/css/bootstrap.min.css"
        rel="stylesheet"
        integrity="sha384-Zenh87qX5JnK2Jl0vWa8Ck2rdkQ2Bzep5IDxbcnCeuOxjzrPF/et3URy9Bv1WTRi"
        crossorigin="anonymous"
    />
    <!-- <script src="asset/public.js?version={{lastModifiedDate('asset/public.js')}}"></script> -->
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <link
        rel="stylesheet"
        href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.9.1/font/bootstrap-icons.css"
    />
    <script>
        function lastModifiedDate(url) {
            try {
                var req = new XMLHttpRequest();
                req.open("HEAD", url, false);
                req.send(null);
                if (req.status == 200) {
                    return req.getResponseHeader("Last-Modified");
                } else return false;
            } catch (er) {
                return er.message;
            }
        }
    </script>

    <link rel="stylesheet" href="../../../main.css" />
    <style>
        #navbar_html {
            margin-bottom: 20px;
        }

        .offer {
            margin-top: 100px;
        }

        select,
        option {
            width: 200px;
        }

        #map {
            height: 500px;
            width: auto;
            margin-bottom: 50px;
            border-radius: 20px;
        }

        .wrong_loc {
            display: block;
            justify-content: center;
            text-align: center;
            font-family: "Lucida Sans", "Lucida Sans Regular", "Lucida Grande",
                "Lucida Sans Unicode", Geneva, Verdana, sans-serif;
            border-radius: 20px;
            background-color: coral;
            margin-bottom: 40px;
        }

        #wrongloc {
            display: block;
            justify-content: center;
            font-family: "Lucida Sans", "Lucida Sans Regular", "Lucida Grande",
                "Lucida Sans Unicode", Geneva, Verdana, sans-serif;
        }

        .error {
            background-color: coral;
            display: none;
            width: 500px;
            height: 30px;
        }

        #id {
            margin: 0;
            display: block;
            justify-content: center;
        }

        .error.display-error {
            display: block;
            justify-content: center;
            text-align: center;
            font-family: "Lucida Sans", "Lucida Sans Regular", "Lucida Grande",
                "Lucida Sans Unicode", Geneva, Verdana, sans-serif;
            border-radius: 10px;
            transform: translateY(10px);
            margin-top: 0;
        }

        #problematic {
            display: block;
            justify-content: center;
        }

        .error.display-error {
            display: block;
            justify-content: center;
            text-align: center;
            font-family: "Lucida Sans", "Lucida Sans Regular", "Lucida Grande",
                "Lucida Sans Unicode", Geneva, Verdana, sans-serif;
            border-radius: 10px;
            transform: translateY(10px);
            margin-top: 0;
        }

        #problematic {
            display: block;
            justify-content: right;
            font-family: "Lucida Sans", "Lucida Sans Regular", "Lucida Grande",
                "Lucida Sans Unicode", Geneva, Verdana, sans-serif;
            position: relative;
        }

        .alert-info {
            height: auto;
            width: auto;
            border-radius: 20px;
            display: block;
            justify-content: right;
            position: absolute;
            right: -22px;
            bottom: 16px;
        }

        .group {
            position: relative;
            margin-bottom: 60px;
        }

        .other-group {
            position: relative;
            margin-top: -30px;
            margin-bottom: 60px;
        }

        .text-input {
            margin: 0 auto;
            font-size: calc(1.275rem + 0.3vw);
            font-weight: 500;
            height: 25px;
            padding: 10px 10px 18px 5px;
            /*display: flex;*/
            width: 100%;
            border: none;
            outline: none;
            border-bottom: 1px solid #4e7570;
            color: #4e7570;
            background: rgba(0, 0, 0, 0);
            opacity: 1;
            transition: 0.2s ease;
        }

        .error {
            padding: 10px;
            display: none;
        }

        .getRoute-buttons {
            width: 100px;
            border-radius: 10px;
            background-color: #4e7570;
            color: #b1b1b1;
            border-color: #b1b1b1;
            display: inline-block;
            padding-top: 2px;
        }

        .map-buttons { 
            display: inline-flex !important;
        }

        .location {
            margin-top: 36.8px;
            margin-bottom: 0px;
        }

        .location-input {
            font-size: calc(1.275rem + 0.3vw);
            font-weight: 500;
            height: 37px;
            display: block;
            width: 100%;
            border: none;
            outline: none;
            border-bottom: 1px solid #4e7570;
            color: #4e7570;
            background: rgba(0, 0, 0, 0);
            opacity: 1;
            transition: 0.2s ease;
        }

        .text-address {
            font-size: calc(1.275rem + 0.3vw);
            font-weight: 500;
            height: 25px;
            padding: 10px 10px 18px 5px;
            display: block;
            width: 300px;
            border: none;
            outline: none;
            border-bottom: 1px solid #4e7570;
            color: #4e7570;
            background: rgba(0, 0, 0, 0);
            opacity: 1;
            transition: 0.2s ease;
        }

        .text-input:focus {
            outline: none;
            opacity: 1;
        }

        .cost-input {
            padding-left: 17px;
        }

        .text-label {
            color: #4e7570;
            font-size: 1rem;
            font-weight: normal;
            position: absolute;
            pointer-events: none;
            left: 5px;
            top: 0px;
            opacity: 0.5;
            transition: 0.2s ease all;
            -moz-transition: 0.2s ease all;
            -webkit-transition: 0.2s ease all;
        }

        .other-label {
            color: #4e7570;
            font-size: 1rem;
            font-weight: normal;
            position: absolute;
            opacity: 0.5;
            left: 5px;
            transition: 0.2s ease all;
        }

        .custom-tooltip {
            --bs-tooltip-bg: #4e7570;
            --bs-tooltip-max-width: 100%;
        }

        .date-label {
            color: #4e7570;
            font-size: 1rem;
            font-weight: normal;
            position: absolute;
            opacity: 0.5;
            left: 5px;
            top: -30px;
            transition: 0.2s ease all;
        }

        .date_alert {
            font-size: 1rem;
            font-weight: normal;
            position: absolute;
            opacity: 0.5;
            left: 0px;
            bottom: -22px;
        }

        .datetime-input {
            color: black;
            filter: invert(43%) sepia(18%) saturate(645%) hue-rotate(123deg)
                brightness(91%) contrast(85%);
        }

        .number-input {
            filter: invert(94%) sepia(11%) saturate(369%) hue-rotate(117deg)
                brightness(90%) contrast(91%);
        }

        .currencyinput {
            position: absolute;
            font-size: calc(1.275rem + 0.3vw);
            font-weight: 500;
            color: #4e7570;
            bottom: 2px;
        }

        /* active state */
        .text-input:focus ~ .text-label,
        .text-input:valid ~ .text-label {
            top: -30px;
            font-size: 1rem;
            color: #4e7570;
            opacity: 0.8;
        }

        .highlight {
            position: absolute;
            height: 60%;
            width: 100px;
            top: 25%;
            left: 0;
            pointer-events: none;
            opacity: 0.5;
        }

        /* active state */
        input:focus ~ .highlight {
            -webkit-animation: inputHighlighter 0.3s ease;
            -moz-animation: inputHighlighter 0.3s ease;
            animation: inputHighlighter 0.3s ease;
        }

        /* ANIMATIONS ================ */
        @-webkit-keyframes inputHighlighter {
            from {
                background: #b1b1b1;
            }
            to {
                width: 0;
                background: transparent;
            }
        }
        @-moz-keyframes inputHighlighter {
            from {
                background: #b1b1b1;
            }
            to {
                width: 0;
                background: transparent;
            }
        }
        @keyframes inputHighlighter {
            from {
                background: #b1b1b1;
            }
            to {
                width: 0;
                background: transparent;
            }
        }

        .form-check-input:checked {
            background-color: #4e7570;
            border-color: #4e7570;
        }

        #SMU_label {
            position: absolute;
            left: 6%;
            top: -10%;
            z-index: 0;
            color: #4e7570;
        }
        @media (max-width: 768px) {
            #SMU_label {
                position: absolute;
                left: 3%;
                top: -5%;
                z-index: 0;
                color: #4e7570;
            }
            #arrow {
                transform: rotate(90deg);
            }
        }
        #smulocation {
            font-size: calc(1.275rem + 0.3vw);
            font-weight: 500;
            height: 37px;
            display: block;
            width: 100%;
            border: none;
            outline: none;
            border-bottom: 1px solid #4e7570;
            color: #4e7570;
            background: rgba(0, 0, 0, 0);
            opacity: 1;
            transition: 0.2s ease;
        }
        .location_alert {
            font-size: 1rem;
            font-weight: normal;
            position: absolute;
            opacity: 0.7;
            left: 0px;
        }

        .rotate-forward {
            animation: rotate-180-cw 0.15s cubic-bezier(0.25, 0.46, 0.45, 0.94)
                both;
        }

        @keyframes rotate-180-cw {
            0% {
                transform: rotate(0deg);
            }
            100% {
                transform: rotate(180deg);
            }
        }

        .rotate-backward {
            animation: rotate-180-back 0.15s
                cubic-bezier(0.25, 0.46, 0.45, 0.94) both;
        }

        @keyframes rotate-180-back {
            0% {
                transform: rotate(180deg);
            }
            100% {
                transform: rotate(360deg);
            }
        }

        .rotate-top {
            animation: rotate-180-top 0.15s cubic-bezier(0.25, 0.46, 0.45, 0.94)
                both;
        }

        @keyframes rotate-180-top {
            0% {
                transform: rotate(90deg);
            }
            100% {
                transform: rotate(270deg);
            }
        }

        .rotate-down {
            animation: rotate-180-down 0.15s
                cubic-bezier(0.25, 0.46, 0.45, 0.94) both;
        }

        @keyframes rotate-180-down {
            0% {
                transform: rotate(270deg);
            }
            100% {
                transform: rotate(90deg);
            }
        }
    </style>

    <link rel="stylesheet" href="../../../navbar/nav_styles.css" />
</head>
<body>
    <div id="navbarVue">
        <div data-page="rides"></div>
    </div>

    <div id="form_alerts">
        <div class="offer d-flex justify-content-evenly">
            <h1 class="mb-0 pb-3">Offer a ride</h1>
            <!--            <button></button>-->
            <!-- <button
                type="button"
                class="btn btn-floating"
                data-mdb-ripple-color="dark"
                onclick="rotate_location()"
                style="
                    border-radius: 50%;
                    width: 30px;
                    height: 30px;
                    background-color: #4e7570;
                    position: relative;
                "
                id="bottomtip"
                title="Change Direction"
            >
                <i
                    class="bi bi-arrow-repeat"
                    style="
                        position: absolute;
                        top: 10%;
                        right: 20%;
                        color: white;
                    "
                ></i>
            </button> -->
        </div>

        <!-- this div section handles the selection between SMU and Location -->

        <!--    <div class="trip d-flex mt-3 justify-content-evenly" style="position: relative" >-->
        <!--        <div class="d-flex flex-wrap" style="width:30px">-->

        <!--        </div>-->
        <!--        &lt;!&ndash; dropdown list of all the buildings &ndash;&gt;-->
        <!--        <div class="d-flex flex-wrap h2" id="location_from">-->
        <!--            <div class="">-->
        <!--                SMU-->
        <!--            </div>-->
        <!--        </div>-->
        <!--       -->
        <!--        &lt;!&ndash; GET from input &ndash;&gt;-->
        <!--       -->

        <!--    </div>-->

        <div class="text-center">
            <form
                name="location_form"
                action="../rides_list/rides_listing.html"
                class="d-inline-block"
            >
                <!-- get the input from the user from here -->
                <div class="d-flex row mb-2">
                    <div
                        class="col-xs-12 col-md-5 d-flex justify-content-center py-3"
                        style="position: relative"
                    >
                        <label for="smubuildings" id="SMU_label">School</label>
                        <select
                            name="smubuildings"
                            id="smulocation"
                            onchange="getSMUloc('gohome')"
                        >
                            <option
                                value="0"
                                class="opacity-50"
                                hidden
                                selected
                            >
                                Select School
                            </option>
                            <option value="Singapore 178902,SCIS">SCIS</option>
                            <option value="Singapore 178903,SOE">SOE</option>
                            <option value="55 Armenian St Singapore 179943,SOL">
                                SOL
                            </option>
                            <option value="Singapore 178900,SOA">SOA</option>
                            <option value="Singapore 178899,SOB">SOB</option>
                            <option value="Singapore 179873,SOSS">SOSS</option>
                        </select>
                        <!--                    <label class="location_alert text-danger " role="alert"-->
                        <!--                           v-if="document.getElementsByTagName('select')[0].value=='0'">-->
                        <!--                        Please select a School*-->
                        <!--                    </label>-->
                    </div>

                    <div class="col-md-2" id="arrow" style="position: relative">
                        <div style="height: 40px"></div>
                        <svg
                            xmlns="http://www.w3.org/2000/svg"
                            width="30"
                            height="30"
                            fill="#4e7570"
                            class="bi bi-arrow-right"
                            viewBox="0 0 16 16"
                            style="
                                position: absolute;
                                top: 50%;
                                left: 50%;
                                transform: translate(-50%, -50%);
                            "
                        >
                            <path
                                fill-rule="evenodd"
                                d="M1 8a.5.5 0 0 1 .5-.5h11.793l-3.147-3.146a.5.5 0 0 1 .708-.708l4 4a.5.5 0 0 1 0 .708l-4 4a.5.5 0 0 1-.708-.708L13.293 8.5H1.5A.5.5 0 0 1 1 8z"
                            />
                        </svg>
                    </div>

                    <div class="col-xs-12 col-md-5 justify-content-center py-3">
                        <div
                            class="justify-content-center"
                            style="position: relative"
                        >
                            <input
                                type="text"
                                class="location-input text-input"
                                name="location-input"
                                id="location_field"
                                onclick="frequency_click()"
                                required="false"
                                v-model="location_input"
                            />
                            <span class="highlight"></span>
                            <label class="text-label pt-2" id="address-text"
                                >Drop off address</label
                            >
                            <label
                                class="location_alert text-danger"
                                role="alert"
                                v-if="location_alert"
                            >
                                Please input an address*
                            </label>
                        </div>
                    </div>
                    <div id="kms" class="mx-auto">
                        <p id="error" class="error mx-auto"></p>
                    </div>
                </div>
                <div class="row d-flex justify-content-center">
                    <div class="w-50 map-buttons mb-3">
                        <button
                            type="button"
                            class="btn button w-100 d-block text-center getRoute-buttons"
                            data-mdb-ripple-color="dark"
                            onclick="rotate_location()"
                            id="bottomtip"
                            title="Change Direction"
                        >Switch directions!
                        </button>
                        <input
                            type="button"
                            id="getRoute"
                            value="Find route!"
                            v-bind:disabled="location_input.length == 0"
                            class="btn button w-100 d-block text-center getRoute-buttons"
                            onclick="calcRoute()"
                        />
                        <br />
                        <p id="display" class="lead text-center"></p>
                    </div>
                </div>

                <!-- MAP MAP MAP MAP MAP MAP MAP MAP -->

                <div id="map"></div>
                <!-- <script src="http://maps.googleapis.com/maps/api/js?sensor=false"></script>  -->
                <script
                    src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAv4TSlT_Tm-4Pi6x6_bkUZKgsfr_iFe5Q&callback=initMap"
                    type="text/javascript"
                    async
                    defer
                ></script>
                <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>

                <div id="problematic"></div>
                <script>
                    var map;
                    function initMap() {
                        map = new google.maps.Map(
                            document.getElementById("map"),
                            {
                                center: { lat: coords[0], lng: coords[1] },
                                zoom: 17,
                                mapTypeControl: false,
                                //mapTypeID: google.maps.mapTypeID
                            }
                        );

                        marker = new google.maps.Marker({
                            map,
                            draggable: true,
                            animation: google.maps.Animation.DROP,
                            position: { lat: coords[0], lng: coords[1] },
                            preserveViewport: true,
                        });
                    }
                    //directionsDisplay
                    var chosenloc = document.getElementById("location_field").value;
                    var chosentrans = encodeURI(chosenloc);

                    smuLatLng = [];
                    coords = [1.296568, 103.852119]; // auto starts center at SCIS

                    // directionservice allows use of route method, directionrenderer displays the route

                    // creates the map

                    function getSMUloc() {
                        sch_value = document.getElementById("smulocation").value;
                        sch_deets = sch_value.split(",");
                        smutrans = encodeURI(sch_deets[0]);

                        var url =
                            "https://maps.googleapis.com/maps/api/geocode/json?address=" +
                            smutrans +
                            "&key=AIzaSyAv4TSlT_Tm-4Pi6x6_bkUZKgsfr_iFe5Q";

                        var xhttp = new XMLHttpRequest();
                        xhttp.onreadystatechange = function () {
                            // console.log(this.readyState, this.status)
                            if (this.readyState == 4 && this.status == 200) {
                                try {
                                    var data = JSON.parse(this.responseText);

                                    var location =
                                        data["results"][0]["geometry"][
                                            "location"
                                        ];
                                    console.log(location);
                                    smuLatLng = [
                                        location["lat"],
                                        location["lng"],
                                    ];
                                    console.log(smuLatLng);

                                    coords = [smuLatLng[0], smuLatLng[1]];

                                    initMap();
                                } catch (err) {
                                    document.getElementById(
                                        "display"
                                    ).innerHTML =
                                        "Sorry, invalid address. Please try a valid address!";
                                }
                            } else if (
                                this.readyState != 4 ||
                                this.status != 200
                            ) {
                            }
                        };
                        xhttp.open("GET", url, true);
                        xhttp.send();
                    }

                    function calcRoute() {
                        sch_value =
                            document.getElementById("smulocation").value;
                        sch_deets = sch_value.split(",");

                        sch_postal = sch_deets[0];
                        sch_name = sch_deets[1];

                        if (smu_position == "from") {
                            var request = {
                                origin: sch_postal,
                                destination:
                                    document.getElementById("location_field")
                                        .value,
                                travelMode: google.maps.TravelMode["DRIVING"],
                                unitSystem: google.maps.UnitSystem["METRIC"],
                            };
                            console.log("is it working???");
                        } else {
                            var request = {
                                origin: document.getElementById(
                                    "location_field"
                                ).value,
                                destination: sch_postal,
                                travelMode: google.maps.TravelMode["DRIVING"],
                                unitSystem: google.maps.UnitSystem["METRIC"],
                            };
                        }

                        if (
                            document.getElementById("problematic").innerHTML !=
                            ""
                        ) {
                            console.log("===wtf===");
                            directionsDisplay.setDirections({ routes: [] });
                        }

                        directionsService = new google.maps.DirectionsService();
                        directionsDisplay =
                            new google.maps.DirectionsRenderer();

                        // restrict to singapore...ish
                        var strictBounds = [1.29027, 103.851959];

                        directionsDisplay.setOptions({
                            polylineOptions: {
                                strokeColor: "#4e7570",
                            },
                        });

                        directionsService.route(
                            request,
                            function (result, status) {
                                const output =
                                    document.getElementById("problematic");
                                const loc_outofsg =
                                    document.querySelector("#wrongloc");

                                if (status == "OK") {
                                    // get the distance of the route in km
                                    distance =
                                        result.routes[0].legs[0].distance.text;

                                    if (smu_position == "from") {
                                        (loc_lat =
                                            result.routes[0].legs[0].end_location.lat()),
                                            (loc_lng =
                                                result.routes[0].legs[0].end_location.lng());
                                    } else {
                                        (loc_lat =
                                            result.routes[0].legs[0].start_location.lat()),
                                            (loc_lng =
                                                result.routes[0].legs[0].start_location.lng());
                                    }

                                    if (
                                        1.15948 > loc_lat ||
                                        loc_lat > 1.47475
                                    ) {
                                        loc_outofsg.innerHTML = `<div class='wrong_loc'>Can you put some location within Singapore .</div>`;
                                    } else if (
                                        103.60468 > loc_lng ||
                                        loc_lat > 104.08872
                                    ) {
                                        loc_outofsg.innerHTML = `<div class='wrong_loc'>Can you put some location within Singapore .</div>`;
                                    } else {
                                        // get distance of route in min
                                        duration = parseInt(
                                            result.routes[0].legs[0].duration.text.split(
                                                " "
                                            )
                                        );
                                        recc_price =
                                            parseInt(distance) * 0.15 +
                                            2.8 +
                                            duration * 0.15;

                                        // from smu to indicated location, display route and duration
                                        if (smu_position == "from") {
                                            output.innerHTML = `<div class='alert-info'>
                                <a class="d-inline-block text-align mx-5" data-bs-toggle="tooltip"
                                data-bs-html='true'
                                data-bs-placement="right"
                                data-bs-title="From: ${sch_name}, ${sch_postal}
                                <br>To: ${
                                    document.getElementById("location_field")
                                        .value
                                }
                                <br>Driving distance: ${distance}
                                <br>Recommended Pricing: $${recc_price.toFixed(
                                    2
                                )}
                                <br>Duration: ${
                                    result.routes[0].legs[0].duration.text
                                }</div>"
                                data-bs-custom-class="custom-tooltip">
                                    <svg xmlns="http://www.w3.org/2000/svg"
                                    width='30'
                                    height='30'
                                    viewBox="0 0 512 512"
                                    fill="#4e7570">
                                    <path d="M256 512c141.4 0 256-114.6 256-256S397.4 0 256 0S0 114.6 0 256S114.6 512 256 512zM216 336h24V272H216 192V224h24 48 24v24 88h8 24v48H296 216 192V336h24zm72-144H224V128h64v64z"/>
                                    </svg>
                                </a>`;
                                            marker.setMap(null);
                                            directionsDisplay.setMap(null);
                                            directionsDisplay.setDirections({
                                                routes: [],
                                            });

                                            directionsDisplay.setDirections(
                                                result
                                            );
                                            directionsDisplay.setMap(map);
                                        }
                                        // from indicated to smu, display route and duration
                                        else {
                                            output.innerHTML = `<div class='alert-info'>
                                    <a class="d-inline-block text-align mx-5" data-bs-toggle="tooltip"
                                    data-bs-html='true'
                                    data-bs-placement="right"
                                    data-bs-title="From: ${
                                        document.getElementById(
                                            "location_field"
                                        ).value
                                    }
                                    <br>To: ${sch_name}, ${sch_postal}
                                    <br>Driving distance: ${distance}
                                    <br>Recommended Pricing: $${recc_price.toFixed(
                                        2
                                    )}
                                    <br>Duration: ${
                                        result.routes[0].legs[0].duration.text
                                    }</div>"
                                    data-bs-custom-class="custom-tooltip">
                                        <svg xmlns="http://www.w3.org/2000/svg"
                                        width='30'
                                        height='30'
                                        viewBox="0 0 512 512"
                                        fill="#4e7570">
                                        <path d="M256 512c141.4 0 256-114.6 256-256S397.4 0 256 0S0 114.6 0 256S114.6 512 256 512zM216 336h24V272H216 192V224h24 48 24v24 88h8 24v48H296 216 192V336h24zm72-144H224V128h64v64z"/>
                                        </svg>
                                    </a>`;

                                            marker.setMap(null);
                                            directionsDisplay.setMap(null);

                                            directionsDisplay.setDirections(
                                                result
                                            );
                                            directionsDisplay.setMap(map);

                                            const tooltipTriggerList =
                                                document.querySelectorAll(
                                                    '[data-bs-toggle="tooltip"]'
                                                );
                                            const tooltipList = [
                                                ...tooltipTriggerList,
                                            ].map(
                                                (tooltipTriggerEl) =>
                                                    new bootstrap.Tooltip(
                                                        tooltipTriggerEl
                                                    )
                                            );
                                        }
                                    }
                                } else {
                                    directionsDisplay.setDirections({
                                        routes: [],
                                    });

                                    map.setCenter(coords[0], coords[1]);

                                    // error message for invalid address
                                    output.innerHTML = `<div class='wrong_loc'>Stop it. Get some help. Put correct location please.</div>`;
                                }
                            }
                        );
                    }
                    // autocomplete objects for all input

                    var options = {
                        types: ["(cities)"],
                    };

                    var input1 = document.getElementById("smulocation");
                    var autocomplete1 = new google.maps.places.Autocomplete(
                        input1,
                        options
                    );

                    var input2 = document.getElementById("location_field");
                    var autocomplete2 = new google.maps.places.Autocomplete(
                        input2,
                        options
                    );
                </script>

                <div class="group" id="cost_group">
                    <span class="currencyinput" id="dollarsign"></span>
                    <input
                        type="number"
                        name="cost"
                        min="0"
                        step="0.1"
                        class="text-input cost-input"
                        oninput="cost_click()"
                        required
                    />
                    <span class="highlight"></span>
                    <label class="text-label">Cost per person</label>
                </div>
                <div class="group">
                    <input
                        type="number"
                        name="capacity"
                        min="0"
                        max="10"
                        class="text-input"
                        required
                    />
                    <span class="highlight"></span>
                    <label class="text-label">Seat capacity per ride</label>
                </div>
                <div class="group">
                    <input
                        type="date"
                        name="date"
                        class="text-input datetime-input"
                        v-bind:min="today"
                        oninput="date_click()"
                        v-model="date"
                        required
                    />

                    <label class="date-label" id="date-label">Date</label>
                    <label
                        class="date_alert text-danger"
                        role="alert"
                        v-if="check_date()"
                    >
                        Please select a date not more than 1 year from today *
                    </label>
                </div>
                <div class="group">
                    <input
                        type="time"
                        name="time"
                        class="text-input datetime-input"
                        oninput="time_click()"
                        required
                    />
                    <span class="highlight"></span>
                    <label class="date-label" id="time-label">Time</label>
                </div>
                <button
                    type="submit"
                    class="btn button d-block mx-auto mt-5 w-100 mb-5"
                    id="rides"
                >
                    Get in loser, we're going shopping.
                </button>
            </form>
        </div>
    </div>
</body>

<script>
    username = "bob";
    email = "bob@hello.com"; // this username can be read in the riders_indiv_driver.js file
</script>

<script type="module" src="../../../index.js"></script>
<script type="module" src="./rides_indiv_driver.js"></script>

<script>
    var smu_position = "from";
    var small = window.innerWidth < 768;

    window.addEventListener("resize", (event) => {
        let current_width = window.innerWidth;
        if (current_width < 768 && !small) {
            small = true;
            rotate_location();
            setTimeout(() => {
                rotate_location();
            }, 300);
        } else if (current_width >= 768 && small) {
            small = false;
            rotate_location();
            setTimeout(() => {
                rotate_location();
            }, 300);
        }
    });

    function frequency_click() {
        document.getElementById("location_field").style = "opacity:1";
    }

    function date_click() {
        document.getElementById("date-label").style = "opacity:0.8";
    }

    function time_click() {
        document.getElementById("time-label").style = "opacity:0.8";
    }

    function cost_click() {
        document.getElementById("dollarsign").innerHTML = "$";
    }

    function rotate_location() {
        if (smu_position == "from") {
            if (window.innerWidth > 768) {
                document.getElementById("arrow").classList.remove("rotate-top");
                document
                    .getElementById("arrow")
                    .classList.remove("rotate-down");
                document
                    .getElementById("arrow")
                    .classList.remove("rotate-backward");
                document
                    .getElementById("arrow")
                    .classList.add("rotate-forward");
            } else {
                document
                    .getElementById("arrow")
                    .classList.remove("rotate-forward");
                document
                    .getElementById("arrow")
                    .classList.remove("rotate-down");
                document
                    .getElementById("arrow")
                    .classList.remove("rotate-backward");
                document.getElementById("arrow").classList.add("rotate-top");
            }

            document.getElementById("address-text").innerHTML =
                "Pick up address";
            smu_position = "to";
        } else {
            if (window.innerWidth > 768) {
                document.getElementById("arrow").classList.remove("rotate-top");
                document
                    .getElementById("arrow")
                    .classList.remove("rotate-down");
                document
                    .getElementById("arrow")
                    .classList.remove("rotate-forward");
                document
                    .getElementById("arrow")
                    .classList.add("rotate-backward");
            } else {
                document
                    .getElementById("arrow")
                    .classList.remove("rotate-forward");
                document.getElementById("arrow").classList.remove("rotate-top");
                document
                    .getElementById("arrow")
                    .classList.remove("rotate-backward");
                document.getElementById("arrow").classList.add("rotate-down");
            }
            document.getElementById("arrow").classList.remove("rotate-forward");
            document.getElementById("arrow").classList.add("rotate-backward");
            document.getElementById("address-text").innerHTML =
                "Drop off address";
            smu_position = "from";
        }
    }
    console.log(document.getElementsByTagName("input"));
</script>
<script
    src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-OERcA2EqjJCMA+/3y+gxIOqMEjwtxJY7qPCqsdltbNJuaOe923+mo//f6V8Qbsw3"
    crossorigin="anonymous"
></script>

<script type="module" src="../../../navbar/navbar.js"></script>
