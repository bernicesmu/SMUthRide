<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <link
            href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css"
            rel="stylesheet"
            integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC"
            crossorigin="anonymous"
        />

        <!-- icon library -->
        <script
            src="https://kit.fontawesome.com/943156cb0b.js"
            crossorigin="anonymous"
        ></script>
        <script type="module" src="../../index.js"></script>
        <script type="module" src="chat.js"></script>
        <title>Chat</title>
        <link rel="stylesheet" href="../../main.css" />
        <link rel="stylesheet" href="../../navbar/nav_styles.css" />
    </head>
    <body>
        <!-- navbar -->
        <div id="navbarVue">
            <div
                v-html="navbar_html"
                @scroll="nav_animation"
                data-page="chats"
            ></div>
        </div>

        <div id="overlay">
            <div id="text">
                <span>Enter an Offer Price</span>
                <input type="number" id="offer_price" />
                <span>
                    Driver:
                    <select name="driver" id="">
                        <option value="">Tom</option>
                        <option value="">John</option>
                    </select>
                </span>
                <span>
                    <select name="rides" id="">
                        <option value="">Use vue for this</option>
                        <option value="">Use vue for this</option>
                        <option value="">Use vue for this</option>
                        <option value="">Use vue for this</option>
                    </select>
                </span>
                <span>
                    <button
                        type="button"
                        class="btn btn-danger"
                        onclick="off()"
                    >
                        Cancel
                    </button>
                    <button
                        type="button"
                        class="btn btn-success"
                        onclick="off()"
                    >
                        Confirm
                    </button>
                </span>
            </div>
        </div>

        <!-- chatpage -->
        <div class="container text-center mt-3">
            <header>
                <h2>SMUth Chat</h2>
                <h6>Chat With Your Group and Agree on Price</h6>
            </header>
        </div>

        <div class="container d-flex">
            <div id="chatroom">
                <!-- need to make sure that circle either shrinks or just dissapears  -->
                <div
                    id="joleneusername"
                    class="chatbox"
                    style="border: 3px solid red; padding: 10px; display: flex"
                >
                    <div id="photo"></div>
                    <div
                        style="
                            margin-left: 20px;
                            border: blue solid 3px;
                            align-self: start;
                            width: 70%;
                        "
                    >
                        <b>Jolene</b>
                        <div
                            style="
                                text-overflow: ellipsis;
                                display: block;
                                border: 3px solid yellow;
                                width: 50%;
                                white-space: nowrap;
                                width: 100%;
                                overflow: hidden;
                            "
                        >
                            Lorem ipsum dolor sit Lorem ipsum dolor sit amet
                            consectetur adipisicing elit. Nisi voluptate
                            expedita alias odit commodi obcaecati! Laborum
                            magnam, debitis fugit quaerat at omnis libero
                            accusantium dignissimos asperiores cupiditate
                            molestias, quia autem.
                        </div>
                    </div>
                </div>
            </div>

            <div id="chat" onscroll="sticky()">
                <div id="contact" class="d-flex">
                    <div id="photo"></div>
                    <h3 class="font-weight-bolder">Jolene</h3>
                </div>
                <!-- messages will display here -->
                <!-- <div id="messages">
              <ul id = "message_list"></ul>
            </div> -->
                <ul id="messages"></ul>

                <!-- form to send message -->
                <div class="sub_div">
                    <form action="" id="message-form">
                        <button
                            type="button"
                            class="btn btn-success"
                            onclick="overlay()"
                        >
                            Make Offer
                        </button>
                        <input
                            id="message-input"
                            type="text"
                            placeholder="Type Message..."
                        />

                        <button
                            type="submit"
                            id="message-btn"
                            class="btn btn-success"
                            onclick="test()"
                        >
                            <i class="fa-solid fa-taxi"></i>
                        </button>

                        <!-- <button class="btn btn-outline-dark" id="message-btn" type="submit"><i class="fa-solid fa-taxi"></i></button> -->

                        <!-- <button id="message-btn" type="submit" class="btn-primary"><i class="fa-solid fa-taxi"></i></button> -->
                    </form>
                </div>
            </div>
        </div>

        <!-- scripts -->
        <script src="https://www.gstatic.com/firebasejs/8.2.1/firebase-app.js"></script>
        <script src="https://www.gstatic.com/firebasejs/8.2.1/firebase-database.js"></script>

        <script>
            function sticky() {
                document.getElementsByClassName("sub_div")[0].style.position =
                    "sticky";
            }

            function overlay() {
                document.getElementById("overlay").style.display = "block";
            }

            function off() {
                document.getElementById("overlay").style.display = "none";
            }

            // function scroll(){
            // //   window.setInterval(function() {
            // var elem = document.getElementById('chat');
            // //   elem.scrollTop = elem.scrollHeight;
            // // }, 0);
            // window.scrollTo(0, document.querySelector(".chat").scrollHeight);

            // }
            function test() {
                var elem = document.getElementById("chat");
                elem.scrollTop = elem.scrollHeight;
            }

            // window.setInterval(function() {
            // var elem = document.getElementById('chat');
            //   elem.scrollTop = elem.scrollHeight;
            // }, 0);
        </script>

        <script
            src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/js/bootstrap.bundle.min.js"
            integrity="sha384-OERcA2EqjJCMA+/3y+gxIOqMEjwtxJY7qPCqsdltbNJuaOe923+mo//f6V8Qbsw3"
            crossorigin="anonymous"
        ></script>
        <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
        <script src="../../navbar/navbar.js"></script>
    </body>
</html>
